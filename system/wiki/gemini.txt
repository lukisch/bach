GEMINI - GOOGLE KI-MODELLE & INTEGRATION
========================================

Stand: 2026-01-26

QUELLEN
-------
  Web-Recherche durchgefuehrt am 2026-01-23:
  - Google Blog: Gemini 3 for developers (Nov 2025)
  - Google Developers Blog: Interactions API
  - GitHub: google-gemini/gemini-cli
  - glaforge.dev: Implementing the Interactions API
  - skywork.ai: How to Use Antigravity with Gemini 3 Pro

WAS IST GEMINI?
---------------
Google Gemini ist eine Familie von KI-Modellen:
  - Gemini 3 Pro     Aktuellstes, staerkstes Modell
  - Gemini 2.5 Pro   Vorgaenger, stabil
  - Gemini Flash     Schneller, guenstiger

Gemini bezeichnet auch:
  - Die Chat-Oberflaeche (gemini.google.com)
  - Die API (Google AI Studio, Vertex AI)
  - Die Integration in Antigravity

LOKALE KONFIGURATION
--------------------
  Config-Pfad:      C:\Users\User\.gemini\
  Antigravity:      C:\Users\User\.gemini\antigravity\
  API-Key (CLI):    GEMINI_API_KEY Umgebungsvariable

GEMINI 3 PRO FEATURES
---------------------
  Deep Think
    - Laengere Reasoning-Ketten
    - Besser fuer komplexe Logik/Mathe
    - Hoehere Latenz, bessere Qualitaet

  Thinking Levels
    - low:    Schnell, einfache Tasks
    - medium: Balance (Standard)
    - high:   Maximum Reasoning

  Agentic Capabilities
    - Terminal-Steuerung (bash tool)
    - Browser-Automation
    - Multi-Turn Workflows
    - Tool-Use (Function Calling)

ANTIGRAVITY-INTEGRATION
-----------------------
Antigravity nutzt Gemini als Haupt-Backend:

  Orchestrator: Eigener Agent-Orchestrator
  Endpoint:     daily-cloudcode-pa.sandbox.googleapis.com
                (NICHT der oeffentliche API-Endpoint!)

  Modell-Wahl in Antigravity:
    Settings > Models > Gemini 3 Pro (Standard)
    Optional: Claude Sonnet 4.5, OpenAI

DATENSTRUKTUR (.gemini\antigravity\)
------------------------------------
  LESBAR:
    annotations/           Session-Metadaten (.pbtxt)
    brain/{session-id}/
      task.md              Aufgaben-Checkliste
      task.md.metadata.json
      implementation_plan.md
      walkthrough.md
    code_tracker/          Code-Aenderungen
    knowledge/             Wissensdatenbank
    skills/                Globale Skills
    mcp_config.json        MCP-Server Config
    browserAllowlist.txt   URL Allowlist

  BINAER (nicht lesbar):
    conversations/*.pb     Chat-Verlaeufe (Protobuf)
    implicit/*.pb          Implizites Memory
    user_settings.pb       Einstellungen

BEKANNTE SESSIONS (Beispiele)
-----------------------------
  brain/{session-id}/task.md Format:
    - [x] Analyze codebase        (erledigt)
    - [/] Implement feature       (in Arbeit)
    - [ ] Verify fixes            (offen)

KOMMUNIKATION MIT GEMINI (BACH)
-------------------------------
Mehrere Wege zur Kommunikation:

  1. GEMINI.md Metaprompt
     Pfad: C:\Users\User\.gemini\GEMINI.md
     - Wird bei jedem Antigravity-Start gelesen
     - Enthaelt allgemeine Arbeitsanweisungen
     - Kein Autostart - wartet auf Modus-Auswahl

  2. Partner-Workspace (BACH-spezifisch)
     Pfad: partners/gemini/
       prompts/    Prompt-Vorlagen (auto, default, analyse, bulk, research)
       inbox/      Auftraege an Gemini
       outbox/     Berichte von Gemini
       workspace/  Arbeitsdateien
       startprompt_gemini.txt  Individueller User-Prompt
     Tasks: partners/_TASKS.md

  3. Brain-Monitoring
     - BACH kann task.md auslesen
     - Erkennt was Gemini bearbeitet
     - Sessions in .gemini\antigravity\brain\

  4. MCP-Server (Potenzial)
     - BACH als MCP-Server registrieren
     - Bidirektionale Kommunikation
     - Siehe: wiki/antigravity.txt

TASK-ZUWEISUNG AN GEMINI
------------------------
  Quelle:     partners/_TASKS.md
  Regeln:
    - Max 2-3 Tasks gleichzeitig
    - Ein Task nach dem anderen
    - Nach 2 Tasks: STOPP, warte auf Bestaetigung
    - Reports in outbox/ speichern

  Start-Prompt: partners/gemini/startprompt_gemini.txt

GEMINI CLI
----------
Offizielles Headless-Tool von Google:

  GitHub:       https:/github.com/google-gemini/gemini-cli
  Doku:         https:/google-gemini.github.io/gemini-cli/

  Installation:
    npm install -g gemini-cli

  Auth:
    gemini auth login          # Mit Google Account
    # Oder: GOOGLE_API_KEY Umgebungsvariable setzen

  Nutzung:
    gemini                     # Interaktiv (wartet auf Eingabe)
    gemini "Dein Prompt"       # One-shot (fuehrt aus und beendet)
    gemini --yolo "Prompt"     # Vollautomatisch ohne Nachfragen
    gemini -i "Prompt"         # Prompt ausfuehren, dann interaktiv

  Wichtige Flags:
    --yolo            Automatisch alle Aktionen bestaetigen
    -i, --prompt-interactive  Prompt ausfuehren, dann interaktiv
    -o json           Strukturierte JSON-Ausgabe
    -o stream-json    Echtzeit-Events als JSON Stream
    -r, --resume      Vorherige Session fortsetzen

  Free Tier:
    60 Requests/Minute
    1.000 Requests/Tag
    Gemini 3 Modelle, 1M Token Context

  Unterschied zu Antigravity:
    - CLI ist headless (kein GUI)
    - Ideal fuer Scripting und Automation
    - Gleiche Modelle verfuegbar
    - Weniger Features (keine Artifacts, Browser)

GEMINI API
----------
  Endpoint:     generativelanguage.googleapis.com
  AI Studio:    https:/aistudio.google.com
  Vertex AI:    Google Cloud Console

GEMINI API PREISE (Stand 2026-01)
---------------------------------
  Quellen: ai.google.dev/gemini-api/docs/pricing, aifreeapi.com

  PRICING-TIERS:
    - Free:        Kostenlos mit Rate-Limits
    - Pay-as-you-go: Nach Token-Verbrauch

  GEMINI 3 PRO:
    Input:  $2.00/Million Tokens (bis 200K Context)
            $4.00/Million Tokens (ueber 200K Context)
    Output: $12.00/Million Tokens (bis 200K Context)
            $18.00/Million Tokens (ueber 200K Context)

    Erwartete Preissenkung bei Stable-Release:
    ~$1.50/$10 (<=200K), ~$3/$15 (>200K)

  GEMINI 2.5 FLASH:
    Input:  $0.075-$0.15/Million Tokens
    Output: $0.30-$0.60/Million Tokens

  GEMINI FLASH-LITE:
    Input:  $0.10/Million Tokens

  BILDER:
    Input:  560 Tokens = $0.0011/Bild
    Output: 1K-2K: 1120 Tokens = $0.134/Bild
            Bis 4K: 2000 Tokens = $0.24/Bild

  GOOGLE SEARCH GROUNDING:
    Erste 1.500 Queries/Tag kostenlos (Paid Tier)
    Danach: $35/1.000 Grounding Queries

  FREE TIER (Stand Januar 2026):
    - 5-15 Requests/Minute (je nach Modell)
    - 250.000 Tokens/Minute
    - 1.000 Requests/Tag

ANTIGRAVITY RATE LIMITS (Stand 2026-01)
---------------------------------------
  Quellen: blog.google, GitHub Issues, cloud.google.com/gemini/docs/quotas

  WICHTIG: Antigravity nutzt einen internen Sandbox-Endpoint
           (daily-cloudcode-pa.sandbox.googleapis.com) mit ANDEREN
           Limits als die oeffentliche Gemini API!

  LIMITS NACH TIER:
    Free Tier
      - Woechentliches Kontingent (groesser als taeglich)
      - Refresh: 1x pro Woche
      - Keine exakten Zahlen veroeffentlicht

    AI Pro (Google One ~$20/Mo)
      - Hoechste/grosszuegigste Limits
      - Refresh: Alle 5 Stunden
      - Prioritaet bei hoher Last

    AI Ultra (Premium Google One)
      - Hoechste/grosszuegigste Limits
      - Refresh: Alle 5 Stunden
      - Hoechste Prioritaet

  BEKANNTE HARTE LIMITS:
    ChatRequestsPerDay:        2.000 (auch bei Ultra!)
    Agent Mode (Standard):     120 Req/Min, 1.500/Tag
    Agent Mode (Enterprise):   120 Req/Min, 2.000/Tag

  ZWEI SEPARATE SYSTEME:
    1. Quota-API (fetchAvailableModels) - zeigt verfuegbares Kontingent
    2. Rate-Limits (per-Minute/Stunde) - unabhaengig davon!

    ACHTUNG: HTTP 429 "Resource exhausted" moeglich, obwohl
             Quota-API 60-100% verfuegbar anzeigt!

  NUTZUNG IST TASK-ABHAENGIG:
    "Straightforward tasks consume less quota than complex reasoning"
    - Einfache Tasks = weniger Verbrauch
    - Komplexes Reasoning = mehr Verbrauch

  BEKANNTE PROBLEME (Januar 2026):
    - IAM_PERMISSION_DENIED Fehler (seit 15.01.2026)
    - 429-Fehler trotz verfuegbarer Quota
    - Betrifft alle Modelle (Claude, Gemini Pro, Flash)

CONSUMER ABOS (Google One)
--------------------------
  Google AI Pro
    - Gemini App fuer Produktivitaet
    - Hoeherer Zugang zu Gemini 3 Pro
    - Deep Research
    - Antigravity: 5h Refresh, grosszuegige Limits
    - Preis: Teil von Google One (ca. $20/Monat)

  Google AI Ultra
    - Hoechster Zugang zu Gemini 3 Pro
    - Deep Research
    - Gemini Agent (nur US, nur Englisch)
    - Deep Think Reasoning-Modell
    - Antigravity: 5h Refresh, hoechste Prioritaet
    - Preis: Premium Google One

BUSINESS ABOS
-------------
  Gemini for Workspace
    - Integration in Google Docs/Drive/Mail
    - $20-30/User/Monat
    - Gemini 2.0/3.0 Features inkludiert

  Gemini Advanced (Consumer)
    - $19.99/Monat
    - Teil von Google One Abo

ENTERPRISE (Vertex AI)
----------------------
  - Fuer grosse Deployments
  - Custom Security, Support, Compliance
  - Zusaetzliche Kosten: Compute, Networking, Storage
  - Kontaktiere Google fuer Preise

Kostenlos in AI Studio mit Rate Limits.

INTERACTIONS API (NEU)
----------------------
Neue API fuer agentic Workflows:

  Features:
    - Server-side History
    - Native Thought-Handling
    - Background Processing
    - MCP Support
    - Structured JSON Outputs

  Doku: developers.googleblog.com

BACH-INTEGRATION DETAILS
------------------------
  gemini_start.py
    - Startet Gemini CLI oder Antigravity
    - Verschiedene Modi ueber Prompt-Vorlagen
    - Pfad: tools/gemini_start.py

  ZWEI BACKENDS:
    --cli         Gemini CLI (headless, vollautomatisch)
    --gui         Antigravity (Prompt in Zwischenablage)

  MODI-UEBERSICHT:

  | Modus        | CLI                      | GUI (Antigravity)           |
  |--------------|--------------------------|------------------------------|
  | Auto         | gemini -b --yolo (2 Tasks) | NICHT VERFUEGBAR           |
  | Bulk         | gemini -b --yolo (endless) | Prompt in Zwischenablage   |
  | Interaktiv   | gemini (wartet)          | Prompt in Zwischenablage     |
  | Individual   | gemini -b --yolo         | Prompt in Zwischenablage     |
  | Analyse      | gemini -b --yolo         | Prompt in Zwischenablage     |
  | Research     | gemini -b --yolo         | Prompt in Zwischenablage     |

  CLI-Aufruf (vollautomatisch):
    python gemini_start.py --cli                # Auto-Modus (2 Tasks, STOPP)
    python gemini_start.py --cli --bulk         # Bulk-Modus (endless)
    python gemini_start.py --cli --mode analyse # Analyse-Modus
    python gemini_start.py --cli --individual   # User-Prompt

  GUI-Aufruf (Zwischenablage):
    python gemini_start.py --gui --bulk         # Bulk-Prompt in Clipboard
    python gemini_start.py --gui --default      # Interaktiv-Prompt in Clipboard
    python gemini_start.py --gui --mode analyse # Analyse-Prompt in Clipboard

  HINWEIS GUI-Modus:
    - Prompt wird in Zwischenablage kopiert
    - Antigravity oeffnet sich
    - User muss Prompt einfuegen (Ctrl+V) und Enter druecken
    - Meldung: "Prompt in Zwischenablage. Einfuegen und Enter druecken."

  Prompt-Vorlagen (partners/gemini/prompts/):
    auto.txt      Tasks sofort abarbeiten (CLI: mit Stopper)
    bulk.txt      Alle Tasks ohne Limit
    default.txt   Wartet auf Anweisungen
    analyse.txt   Analyse-Scripts ausfuehren
    research.txt  Recherche-Modus

  Individueller Prompt:
    partners/gemini/startprompt_gemini.txt
    Wird mit --individual geladen

  Batch-Starter:
    partners/gemini/start_gemini.bat
    Zeigt interaktives Menue mit CLI/GUI Auswahl

UNTERSCHIED: ANTIGRAVITY vs GEMINI CLI vs API
---------------------------------------------
  Antigravity (GUI)
    - VS Code Fork mit Agent-UI
    - Artifacts, Browser-Integration
    - Human-in-the-loop (kein Autostart)
    - Prompt muss manuell eingefuegt werden

  Gemini CLI (Headless)
    - Terminal-Tool, kein GUI
    - Vollautomatisch mit -b --yolo
    - Ideal fuer Scripting/Automation
    - BACH nutzt dies fuer Auto-Modus

  Gemini API
    - Direkte Model-Aufrufe
    - Maximale Kontrolle
    - Eigene Anwendungen bauen

TROUBLESHOOTING
---------------
  "Quota exceeded"
    - Rate Limits erreicht
    - Warten oder Paid API nutzen

  Protobuf nicht lesbar
    - conversations/*.pb sind binaer
    - Nutze brain/task.md stattdessen

  Antigravity oeffnet nicht
    - Pruefe .antigravity\ Konfiguration
    - Extensions deaktivieren zum Test

NUETZLICHE LINKS
----------------
  Gemini:         https:/gemini.google.com
  AI Studio:      https:/aistudio.google.com
  API Docs:       https:/ai.google.dev/docs
  Antigravity:    https:/antigravity.google
  Gemini CLI:     https:/github.com/google-gemini/gemini-cli

SIEHE AUCH
----------
  wiki/antigravity.txt    Antigravity IDE (ausfuehrlich!)
  wiki/ollama.txt         Lokaler LLM-Server
  docs/docs/docs/help/partners.txt            KI-Partner im BACH-System
  partners/gemini/            Gemini Partner-Workspace
  tools/gemini_start.py        BACH Gemini Starter
