{
  "$schema": "http:/json-schema.org/draft-07/schema#",
  "$id": "bach-agent-manifest-v1",
  "title": "BACH Agent/Skill Export Manifest",
  "description": "Schema fuer manifest.json beim Export von BACH Agents/Skills",
  "type": "object",
  "required": ["name", "version", "type", "includes"],
  
  "properties": {
    "name": {
      "type": "string",
      "description": "Eindeutiger Name des Agents/Skills",
      "pattern": "^[a-z][a-z0-9-]*$"
    },
    "version": {
      "type": "string",
      "description": "Semantische Version",
      "pattern": "^\\d+\\.\\d+(\\.\\d+)?$"
    },
    "type": {
      "type": "string",
      "enum": ["agent", "skill", "service"],
      "description": "Art des Exports"
    },
    "description": {
      "type": "string",
      "description": "Kurze Beschreibung"
    },
    "created_at": {
      "type": "string",
      "format": "date-time",
      "description": "Export-Zeitstempel"
    },
    "bach_min_version": {
      "type": "string",
      "description": "Minimale BACH-Version fuer Kompatibilitaet"
    },
    
    "includes": {
      "type": "object",
      "description": "Dateien die exportiert werden",
      "properties": {
        "core": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Kernkomponenten (Pfade mit Glob-Pattern)"
        },
        "services": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Genutzte BACH-Services"
        },
        "tools": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Genutzte Tools"
        },
        "data": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Datendateien und Konfiguration"
        },
        "docs": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Dokumentation"
        }
      },
      "required": ["core"]
    },
    
    "dependencies": {
      "type": "object",
      "description": "Externe Abhaengigkeiten",
      "properties": {
        "python": {
          "type": "string",
          "description": "Python-Version"
        },
        "packages": {
          "type": "array",
          "items": { "type": "string" },
          "description": "pip-Pakete"
        },
        "system": {
          "type": "array",
          "items": { "type": "string" },
          "description": "System-Programme"
        }
      }
    },
    
    "entry_points": {
      "type": "object",
      "description": "Startpunkte fuer verschiedene Modi",
      "additionalProperties": {
        "type": "string"
      }
    },
    
    "config": {
      "type": "object",
      "description": "Standardkonfiguration",
      "additionalProperties": true
    }
  }
}
