{
  "$schema": "https:/json-schema.org/draft/2020-12/schema",
  "title": "Förderbericht ICF-basiert",
  "description": "JSON-Schema fuer die LLM-generierte Berichtsstruktur eines ICF-basierten Förderberichts (Autismus-Förderung)",
  "version": "1.0.0",
  "type": "object",
  "required": ["stammdaten", "förderziele", "bereiche", "empfehlung", "abschluss"],
  "properties": {
    "stammdaten": {
      "type": "object",
      "description": "Allgemeine Informationen zum Klienten und zur Förderung",
      "properties": {
        "name": { "type": "string", "description": "Name des Klienten (Tarnname)" },
        "geburtsdatum": { "type": "string", "description": "Geburtsdatum (dd.mm.yyyy, Fake)" },
        "sachbearbeiter": { "type": "string", "description": "Name der zuständigen Sachbearbeiter*in" },
        "landkreis": {
          "type": "string",
          "enum": ["Lörrach", "Waldshut"],
          "description": "Zuständiger Landkreis (aus Kostenzusage/Hilfeplan ablesen)"
        },
        "zeichen_amt": { "type": "string", "description": "Aktenzeichen des Amts (aus Kostenzusage/Hilfeplan)" },
        "kostenzusage_ende": { "type": "string", "description": "Datum Ende der Kostenzusage (dd.mm.yyyy)" },
        "weiterbewilligung_ab": { "type": "string", "description": "Datum Weiterbewilligung ab (dd.mm.yyyy)" },
        "förderungsbeginn": { "type": "string", "description": "Datum Förderungsbeginn bei proAutismus (dd.mm.yyyy, aus Aktendeckblatt)" },
        "diagnosen": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "icd_code": { "type": "string", "description": "ICD-10 Code (z.B. F84.5)" },
              "bezeichnung": { "type": "string", "description": "Diagnose-Bezeichnung" },
              "diagnostiker": { "type": "string", "description": "Name des Diagnostikers/Klinik" },
              "datum": { "type": "string", "description": "Datum der Diagnose (Jahr oder dd.mm.yyyy)" },
              "quelle": { "type": "string", "description": "Dokument aus dem die Info stammt (z.B. 'Bericht vom 12.03.2019')" }
            }
          },
          "description": "Liste der Diagnosen mit Datum, Diagnostiker und Quelle"
        },
        "therapieangebot": {
          "type": "object",
          "properties": {
            "einzelförderung": { "type": "boolean" },
            "gruppenförderung": { "type": "boolean" },
            "co_förderung": { "type": "boolean" },
            "förderdiagnostik": { "type": "boolean" }
          }
        },
        "netzwerkarbeit": {
          "type": "object",
          "properties": {
            "elternarbeit": { "type": "boolean" },
            "kindergarten": { "type": "boolean" },
            "schule": { "type": "boolean" },
            "sonstige": { "type": "boolean" }
          }
        }
      }
    },

    "förderziele": {
      "type": "array",
      "description": "Aktive Förderziele mit ICF-Code, Ist-Stand und Bewertung",
      "items": {
        "type": "object",
        "required": ["icf_code", "zielformulierung", "ist_stand", "erreicht"],
        "properties": {
          "icf_code": {
            "type": "string",
            "description": "ICF-Code (z.B. D350, D710, D230)"
          },
          "zielformulierung": {
            "type": "string",
            "description": "Konkrete Zielformulierungung fuer diesen Bereich"
          },
          "ist_stand": {
            "type": "string",
            "description": "Ausführliche Beschreibung des aktuellen Entwicklungsstandes. Mindestens 2-3 Sätze basierend auf den Beobachtungen."
          },
          "erreicht": {
            "type": "integer",
            "enum": [1, 2, 3],
            "description": "1=nicht erreicht, 2=teilweise erreicht, 3=erreicht"
          },
          "grund_nichterreichung": {
            "type": ["integer", "null"],
            "enum": [1, 2, 3, 4, null],
            "description": "Nur bei erreicht=1 oder 2: 1=nicht mehr relevant, 2=Änderung Bedarfslage, 3=Ziele unrealistisch, 4=sonstiges"
          }
        }
      }
    },

    "bereiche": {
      "type": "object",
      "description": "Weitere ICF-Bereiche als individualisierte Satzbausteine",
      "properties": {
        "mobilität": {
          "type": "object",
          "properties": {
            "aktiv": { "type": "boolean" },
            "text": { "type": "string", "description": "Individualisierter Text fuer Mobilität (D47xx)" }
          }
        },
        "selbstversorgung": {
          "type": "object",
          "properties": {
            "aktiv": { "type": "boolean" },
            "text": { "type": "string", "description": "Individualisierter Text fuer Selbstversorgung (D5xx)" }
          }
        },
        "haushalt": {
          "type": "object",
          "properties": {
            "aktiv": { "type": "boolean" },
            "text": { "type": "string", "description": "Individualisierter Text fuer Haushalt (D6xx)" }
          }
        },
        "lebensbereiche": {
          "type": "object",
          "properties": {
            "aktiv": { "type": "boolean" },
            "text": { "type": "string", "description": "Individualisierter Text fuer Lebensbereiche (D8xx): Schule, Beruf, Geld" }
          }
        },
        "gesellschaft_freizeit": {
          "type": "object",
          "properties": {
            "aktiv": { "type": "boolean" },
            "text": { "type": "string", "description": "Individualisierter Text fuer Gesellschaft/Freizeit (D9xx)" }
          }
        }
      }
    },

    "umweltfaktoren": {
      "type": "object",
      "description": "Besonderheiten und Umweltfaktoren des Klienten",
      "properties": {
        "wahrnehmung": {
          "type": "object",
          "properties": {
            "aktiv": { "type": "boolean" },
            "text": { "type": "string", "description": "Wahrnehmungsbesonderheiten (Licht, Geräusche, Taktil, etc.)" }
          }
        },
        "kommunikation": {
          "type": "object",
          "properties": {
            "aktiv": { "type": "boolean" },
            "text": { "type": "string", "description": "Kommunikationshilfen und -technologien" }
          }
        },
        "kognition_motorik": {
          "type": "object",
          "properties": {
            "aktiv": { "type": "boolean" },
            "text": { "type": "string", "description": "Kognitive/motorische Besonderheiten" }
          }
        },
        "medizinisches": {
          "type": "object",
          "properties": {
            "aktiv": { "type": "boolean" },
            "text": { "type": "string", "description": "Medizinische Faktoren (Schlaf, Affekte, ADHS, etc.)" }
          }
        }
      }
    },

    "besondere_fähigkeiten": {
      "type": "string",
      "description": "Besondere Stärken und Fähigkeiten des Klienten (1-2 Sätze)"
    },

    "neue_ziele": {
      "type": "array",
      "description": "Neue Förderziele fuer den naechsten Zeitraum",
      "items": {
        "type": "object",
        "required": ["icf_code", "zielformulierung", "ist_stand"],
        "properties": {
          "icf_code": { "type": "string" },
          "zielformulierung": { "type": "string" },
          "ist_stand": { "type": "string", "description": "Aktuelle Ausgangslage fuer das neue Ziel" }
        }
      }
    },

    "empfehlung": {
      "type": "object",
      "description": "Empfehlung fuer den weiteren Förderverlauf",
      "required": ["verlängerung", "begründung"],
      "properties": {
        "verlängerung": {
          "type": "boolean",
          "description": "true=Verlängerung empfohlen, false=Beendigung"
        },
        "begründung": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "therapieziele_nicht_erreicht",
              "übergang_lebensbereich",
              "krise_erhoehter_bedarf",
              "sonstiges",
              "ziele_erreicht",
              "andere_therapie_vorrangig",
              "pausierung"
            ]
          }
        },
        "umfang": {
          "type": "string",
          "description": "Empfohlener Förderumfang (z.B. '4 x 75 Minuten Einzelförderung pro Monat')"
        },
        "sonstige_empfehlung": {
          "type": ["string", "null"],
          "description": "Optionale sonstige Empfehlung"
        }
      }
    },

    "abschluss": {
      "type": "object",
      "description": "Abschließende Bemerkungen",
      "required": ["aktuelle_entwicklungen", "bedingungsmodell"],
      "properties": {
        "aktuelle_entwicklungen": {
          "type": "string",
          "description": "2-4 Sätze zu aktuellen Fortschritten und wichtigen Entwicklungen"
        },
        "bedingungsmodell": {
          "type": "string",
          "description": "2-4 Sätze: Bedingungsmodell (Diagnose -> Einschraenkungen -> Teilhabeproblematik) und Empfehlung zur Fortfuehrung"
        }
      }
    }
  }
}
