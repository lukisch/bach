# Portabilitaet: UNIVERSAL
# Version: 1.0.0
# Zuletzt validiert: 2026-02-28
# Naechste Pruefung: 2026-08-28
# Ressourcen: [hub/prompt.py, prompt_templates, prompt_boards, prompt_versions]

PROMPT - Prompt-Template-Verwaltung
=====================================

STAND: 2026-02-28

Das Prompt-System verwaltet wiederverwendbare Prompt-Templates mit
Versionierung und Organisationsmoeglichkeit via Boards.

Ref: B42

KERNKONZEPTE
------------
- TEMPLATES: Wiederverwendbare Prompt-Texte mit Name, Kategorie, Tags
- VERSIONEN: Jede Aenderung erzeugt eine neue Version (Historie)
- BOARDS: Sammlungen von Templates (thematische Gruppen)

CLI-BEFEHLE (bach prompt)
--------------------------

  list [--category CAT]           Alle Templates auflisten
  add <name> <text>               Neues Template erstellen
  get <id_oder_name>              Template + Versionshistorie anzeigen
  update <id_oder_name> <text>    Neue Version erstellen
  delete <id_oder_name>           Template loeschen
  search <query>                  Templates durchsuchen
  boards                          Alle Boards anzeigen
  board <titel>                   Board anzeigen/erstellen/verwalten

OPTIONEN FUER ADD
-----------------
  --category CAT    Kategorie (z.B. "analyse", "schreiben")
  --tags t1,t2      Tags (kommagetrennt)
  --purpose TEXT    Verwendungszweck

OPTIONEN FUER BOARD
-------------------
  --add-prompt ID         Prompt zu Board hinzufuegen
  --remove-prompt ID      Prompt aus Board entfernen
  --description TEXT      Board-Beschreibung setzen/aktualisieren

BEISPIELE
---------

  # Templates auflisten
  bach prompt list
  bach prompt list --category analyse

  # Template erstellen
  bach prompt add "Zusammenfassung" "Fasse den folgenden Text zusammen:" --category schreiben
  bach prompt add "Code-Review" "Pruefe diesen Code auf Fehler:" --tags "dev,review" --purpose "Code-Qualitaet"

  # Template anzeigen (mit Versionshistorie)
  bach prompt get 42
  bach prompt get "Zusammenfassung"

  # Template aktualisieren (erstellt Version)
  bach prompt update 42 "Fasse den folgenden Text praegnant zusammen:"
  bach prompt update "Zusammenfassung" "Neue Version des Textes..."

  # Template loeschen
  bach prompt delete 42

  # Suchen (in Name, Text, Tags)
  bach prompt search "zusammenfass"
  bach prompt search "code"

  # Boards verwalten
  bach prompt boards                                      # Alle Boards
  bach prompt board "Schreiben"                           # Board erstellen/anzeigen
  bach prompt board "Schreiben" --add-prompt 42           # Prompt hinzufuegen
  bach prompt board "Schreiben" --remove-prompt 42        # Prompt entfernen
  bach prompt board "Schreiben" --description "Schreib-Prompts fuer den Alltag"

VERSIONIERUNG
-------------

Beim `update` wird der alte Text automatisch als Version gespeichert.
Versionshistorie ist bei `bach prompt get <id>` sichtbar:

  VERSIONEN (2):
    Nr    Erstellt                   Text (Vorschau)
    1     2026-01-15T10:30:00        Alter Text...
    2     2026-02-01T14:00:00        Naechste Version...

CONFLICT RESOLUTION (--confidence)
------------------------------------
Beim `add` kann Konfidenz angegeben werden (fuer Shared Memory):
  bach prompt add <name> <text> --confidence 0.8

Bei Konflikten (gleicher Key, Namespace) gewinnt hoehere Konfidenz.

DATENBANK
---------

  prompt_templates:
    id, name, purpose, text, tags, category,
    created_at, updated_at, dist_type

  prompt_versions:
    id, prompt_id, version_number, text, tags, created_at

  prompt_boards:
    id, title, description, created_at

  prompt_board_items:
    id, board_id, prompt_id, added_at

DATEIEN
-------
  hub/prompt.py     Handler-Implementation

SIEHE AUCH
----------
  bach --help tasks        Task-System
  bach --help memory       Memory-System
  bach --help skills       SKILL.md-System
