# Portabilitaet: SYSTEM
# Zuletzt validiert: 2026-02-08
# Naechste Pruefung: 2026-05-08
# Ressourcen: [system_identity table], [hub/dist.py], [tools/generators/distribution_system.py]
# Status: HANDLER DEFEKT - dist-Routing funktioniert nicht

IDENTITY-SYSTEM
===============

Stand: 2026-02-08

Das Identity-System gewaehrleistet die Integritaet und Identifikation der BACH-Instanz.
Funktionen sind im Distribution-Handler implementiert, aber das CLI-Routing ist defekt.

TABELLE: system_identity (Zentrales Singleton)
----------------------------------------------
  - id:               Primary Key (MUSS 1 sein - Singleton)
  - instance_id:      Eindeutige UUID der Installation
  - instance_name:    Individueller Name (z.B. "BACH_Alpha")
  - version:          Aktuelle BACH-Version (z.B. v1.1.83)
  - created_at:       Erstellungsdatum
  - seal_status:      Integritaets-Status ('intact' | 'broken')
  - kernel_hash:      SHA256 der System-Kern-Dateien
  - last_verified:    Letzter Verifizierungs-Zeitpunkt
  - current_mode:     Betriebsmodus (default: 'developer')
  - last_boot:        Letzter Boot-Zeitpunkt
  - boot_count:       Anzahl Boots (default: 0)

SIEGEL-MECHANISMUS
------------------
  1. Boot-Check: Bei jedem Startup wird der Kernel-Hash berechnet
  2. Vergleich: Stimmt der Hash mit der DB ueberein?
  3. Status: Bei Abweichung wird das Siegel "gebrochen" (broken)
  4. Warnung: Ein gebrochenes Siegel weist auf manuelle Eingriffe hin

CLI-BEFEHLE (DOKUMENTIERT, aber DEFEKT)
----------------------------------------
  bach --dist status         System-Status mit Siegel-Info anzeigen
  bach --dist verify         Siegel-Integritaet pruefen

PROBLEM: Der dist-Handler (hub/dist.py) existiert und implementiert diese
Funktionen, aber das CLI-Routing in bach.py ruft ihn nicht korrekt auf.
Nur "bach dist list" funktioniert.

NICHT IMPLEMENTIERT
-------------------
  bach --dist reseal         (EXISTIERT NICHT - keine Reseal-Funktion)

Bei gebrochenem Siegel gibt es keinen automatischen Repair. Man muss manuell
via distribution_system.py ein neues Siegel setzen.

IMPLEMENTATION
--------------
  Handler:        system/hub/dist.py (DistHandler)
  Backend:        system/tools/generators/distribution_system.py
  Operations:     status, verify, scan, snapshot, release, restore, install, list
  Funktioniert:   Nur "list" - alle anderen Operationen werden nicht geroutet

KONTEXT
-------
Identity ist Teil des Distribution-Systems (ehemals Governance-Schicht 5).
Sie stellt sicher dass das "Gedaechtnis" (DB) zur "Hardware" (Dateisystem) passt.

SIEHE AUCH
----------
  docs/docs/docs/help/maintain.txt        Wartungs-Tools (keine Identity-Funktion)
  docs/docs/docs/help/distribution.txt    Distribution & Releases
  docs/docs/docs/help/bach_info.txt       System-Uebersicht
