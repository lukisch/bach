# Portabilitaet: UNIVERSAL
# Version: 1.0.0
# Zuletzt validiert: 2026-02-08
# Naechste Pruefung: 2026-08-08

COUNTDOWN - Countdown mit Trigger
==================================

Countdown-Timer der bei Ablauf optional einen Befehl ausfuehrt.

CLI-BEFEHLE
-----------

  bach countdown start <name> HH:MM:SS              Countdown starten
  bach countdown start <name> HH:MM:SS --after "cmd" Mit Trigger-Befehl
  bach countdown stop <name>                         Countdown abbrechen
  bach countdown list                                Aktive Countdowns
  bach countdown pause <name>                        Pausieren
  bach countdown resume <name>                       Fortsetzen

AUSGABE-FORMAT
--------------

  Normal:  [COUNTDOWN] session: 45:12 verbleibend
  Warnung: [!] session: Nur noch 04:58!

Warnung erscheint bei < 5 Minuten verbleibend.

PERSISTENZ
----------

  Datei: data/.countdown_state

  Inhalt:
  {
    "countdowns": {
      "session": {
        "end_time": "2026-01-30T15:00:00",
        "after_command": "shutdown 'Zeit um'",
        "paused": false,
        "remaining_on_pause": null
      }
    }
  }

BEISPIELE
---------

  # 1-Stunde Session-Countdown
  bach countdown start session 01:00:00
  -> Countdown 'session' gestartet: 01:00:00

  # Mit automatischem Shutdown
  bach countdown start session 01:00:00 --after "shutdown 'Session beendet'"
  -> Bei Ablauf wird "bach --shutdown 'Session beendet'" ausgefuehrt

  # Pomodoro-Timer (25 Min)
  bach countdown start focus 00:25:00
  -> Countdown 'focus' gestartet: 00:25:00

  # Pausieren und Fortsetzen
  bach countdown pause focus
  bach countdown resume focus

  # Status pruefen
  bach countdown list
  -> session: 45:12 verbleibend
  -> focus:   19:45 verbleibend (PAUSIERT)

TRIGGER (--after)
-----------------

Der --after Befehl wird bei Ablauf ausgefuehrt:

  --after "shutdown 'Zeit um'"     Session beenden
  --after "msg send user 'Pause!'" Nachricht senden
  --after "task done 123"          Task als erledigt markieren

Bei Ablauf wird der Befehl in eine Queue geschrieben.
Der naechste CLI-Aufruf fuehrt ihn aus (oder der Daemon).

USECASES
--------

  1. SESSION-LIMIT
     bach countdown start session 02:00:00 --after "shutdown 'Limit erreicht'"
     -> Automatisches Session-Ende nach 2 Stunden

  2. POMODORO-TECHNIK
     bach countdown start focus 00:25:00 --after "msg send user 'Pause machen!'"
     -> Nach 25 Min Erinnerung an Pause

  3. DEADLINE-REMINDER
     bach countdown start deadline 04:00:00
     -> Warnung bei < 5 Min, dann manuell handeln

ZUSAMMENSPIEL
-------------

Countdown ist Teil des Zeit-Systems:
  --help clock    Uhrzeit-Anzeige
  --help timer    Stoppuhr
  --help between  Between-Checks
  --help beat     Unified Zeit-Anzeige

---
Version: 1.0 | Status: Implementiert (v1.1.83)
Siehe: docs/CONCEPT_time_system.md
