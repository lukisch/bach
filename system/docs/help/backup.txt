# Portabilitaet: UNIVERSAL
# Version: 1.1.0
# Zuletzt validiert: 2026-02-08 (Help-Forensik)
# Naechste Pruefung: 2026-08-08

BACKUP & RESTORE
================

Das Backup-System basiert auf dem dist_type Konzept:

  dist_type = 2 (CORE)      → Distribution IST das Backup
  dist_type = 1 (TEMPLATE)  → 1x Snapshot bei Installation
  dist_type = 0 (USER_DATA) → Normale Backup-Rotation

BEFEHLE
-------

  # Backup erstellen
  bach backup create                  Lokales Backup
  bach backup create --to-nas         Auch auf NAS kopieren

  # Backups anzeigen
  bach backup list                    Lokale Backups
  bach backup list --nas              NAS-Backups
  bach backup info <name>             Backup-Details

  # Wiederherstellen (NUR userdata_*.zip Backups)
  bach restore backup <name>          Bestimmtes Backup
  bach restore backup latest          Neuestes Backup

  # Template zurücksetzen (NUR via backup_manager.py)
  python system/tools/backup_manager.py restore template SKILL.md

WAS WIRD GESICHERT?
-------------------

  dist_type = 0 (USER_DATA):
    ├── tasks (alle Tasks, Status, History)
    ├── memory/ (Sessions, Longterm, Archive)
    ├── data/logs/ (Session-Logs, konsolidierter Pfad)
    └── user/ (Inbox, Nachrichten, Agenda)

  NICHT gesichert (dist_type >= 1):
    ├── bach.py, schema.sql, hub/
    ├── tools/, skills/, docs/docs/docs/help/
    └── (sind Teil der Distribution)

BACKUP-ROTATION
---------------

  Lokal (_system/data/system/data/system/data/system/data/backups/):  7 Backups behalten
  NAS:                30 Backups behalten
  OneDrive:           Automatisch (Versionsverlauf)

SPEICHERORTE
------------

  Lokal:   system/_system/data/system/data/system/data/system/data/backups/
  NAS:     \\NAS-HOST\fritz.nas\Extreme_SSD\BACKUP\BACH_Backups
  Logs:    system/data/logs/ (konsolidiert)

TOOLS
-----

  system/tools/backup_manager.py     Direkter Aufruf möglich:
    python system/tools/backup_manager.py create [--to-nas]
    python system/tools/backup_manager.py list [--nas]
    python system/tools/backup_manager.py info <name>
    python system/tools/backup_manager.py restore backup <name>
    python system/tools/backup_manager.py restore template <file>
    python system/tools/backup_manager.py snapshot <file>

API
---

  POST /api/v1/backup         Backup erstellen (Headless)
  GET  /api/v1/backup/list    Backups auflisten

VERWANDTE SKILLS
----------------

  skills/_service/builder.md  → CREATE, EXPORT, DISTRIBUTE, BACKUP, RESTORE
  docs/BACKUP_SYSTEM.md       → Ursprüngliches Konzept aus _BATCH
